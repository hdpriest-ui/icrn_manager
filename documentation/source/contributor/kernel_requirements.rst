Kernel Requirements
===================

This document specifies the required information and structure for contributing kernels to the ICRN catalog.

Required Metadata
-----------------

Each kernel submission must include:

.. list-table::
   :header-rows: 1
   :widths: 25 75

   * - Field
     - Description
   * - Kernel Name
     - Unique, descriptive identifier (lowercase, hyphens allowed). Example: ``bioconductor``, ``ml-toolkit``
   * - Version
     - Version string following semantic versioning or upstream version. Example: ``1.0``, ``3.20``
   * - Language
     - Programming language (``R`` or ``Python``)
   * - Language Version
     - Minimum required language version. Example: ``4.3.0`` for R
   * - Description
     - Brief description of the kernel's purpose and target audience
   * - Package List
     - Complete list of included packages with versions

Indexing Kernels
----------------

The ``kernel_indexer`` script can be used to create package manifests and inventory all kernels in a repository. This is useful for:

- Tracking which packages are included in each kernel
- Generating package inventories for documentation
- Creating indexes for package discovery

To index all Python kernels in a repository:

.. code-block:: bash

   ./kernel_indexer index --kernel-root /path/to/repository --language Python

This creates a ``package_manifest.json`` file in each kernel directory containing:
- Kernel name and version
- Language and language version
- Complete list of packages with versions and sources
- Indexing timestamp

Required Directory Structure
----------------------------

R Kernels
~~~~~~~~~

.. code-block:: text

   <kernel_root>/R/<kernel_name>/<version>/
   ├── library/
   │   ├── <package1>/
   │   ├── <package2>/
   │   └── ...
   └── package_manifest.json

Python Kernels
~~~~~~~~~~~~~~

.. code-block:: text

   <kernel_root>/Python/<kernel_name>/<version>/
   ├── lib/
   │   └── python3.x/
   │       └── site-packages/
   └── package_manifest.json

Package Manifest Schema
-----------------------

The ``package_manifest.json`` file must conform to this schema:

.. code-block:: json

   {
     "kernel_name": "string (required)",
     "version": "string (required)",
     "language": "string (required, 'R' or 'Python')",
     "language_version": "string (required)",
     "indexed_at": "string (ISO 8601 timestamp)",
     "description": "string (optional)",
     "packages": [
       {
         "name": "string (required)",
         "version": "string (required)",
         "source": "string (optional, e.g., 'CRAN', 'Bioconductor', 'conda-forge')"
       }
     ]
   }


Quality Requirements
--------------------

Before submission, ensure:

1. **All packages install correctly** - No broken dependencies
2. **Core functionality works** - Test primary use cases
3. **Documentation exists** - Description of purpose and included packages
4. **No conflicts** - Packages don't have incompatible version requirements
5. **Manifest is accurate** - Generated by the kernel indexer

Naming Conventions
------------------

- Use lowercase letters and hyphens only
- Choose descriptive, meaningful names
- Avoid generic names like ``my-kernel`` or ``test``
- For domain-specific kernels, use the domain name (e.g., ``bioinformatics``, ``geospatial``)
- For project-based kernels, use the project name (e.g., ``pecan``, ``bioconductor``)

Version Guidelines
------------------

- Follow semantic versioning: ``MAJOR.MINOR`` 
- For upstream project kernels, match their versioning
- Increment version for any package updates
- Never modify an existing version in-place

Support and Questions
---------------------

For questions about kernel contribution:

- Open an issue on the GitHub repository
- Contact the ICRN team
- Review existing kernels as examples

